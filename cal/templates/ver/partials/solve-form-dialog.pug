

.flex-auto.p-6.bg-gradient-to-br.from-teal-900.via-indigo-950.to-zinc-900
  form(method='POST' action='actions/solve/')

     input(type='hidden' name='csrfmiddlewaretoken' value='#{csrf_token}')
     input(type='hidden' name='user' value='#{request.user.pk}')
     input(type='hidden' name='version' value='#{version.pk}')

     .flex.flex-wrap
       h1.flex-auto.text-lg.font-semibold.text-slate-200
          | Solve
       div.text-sm.font-semibold.text-slate-300
          | #{version.schedule.department.name} Schedule
       .w-full.flex-none.text-sm.font-medium.text-slate-100.mt-2
          | Solver available
     .flex.items-baseline.mt-4.mb-6.pb-6.border-b.border-slate-200
       .space-x-2.flex.text-sm
           label
            input(type='radio' name='iterations' value='1' checked)
            | 1
           label
            input(type='radio' name='iterations' value='10')
            | 10
           label
            input(type='radio' name='iterations' value='25')
            | 25

     .flex.space-x-4.mb-6.text-sm.font-medium
       .flex-auto.flex.space-x-4
         button.h-10.px-6.font-semibold.rounded-md.bg-black.text-white.bordered(class="hover:bg-white hover:bg-opacity-25" type='submit')
            | Attempt Solution
         .flex-none.flex.items-center.justify-center.w-9.h-9.rounded-md.text-slate-300.border.border-slate-200(
            onclick='document.getElementById("dialog-solve").style.display="none"')
            iconify-icon(icon="mdi:cancel")

     p.text-sm.text-slate-100
        | Transaction will be performed under the username:
        span.bg-black.bg-opacity-25.p-1.rounded
            | #{request.user}


script.
    // event listener for once modal opens
    document.addEventListener("htmx:afterSwap", function(event) {
        // get the modal
        var modal = document.getElementById("solve-form-dialog");
        // get the button that opens the modal
        var btn = document.getElementById("solve-form-dialog-btn");
        // get the backdrop generated by the modal
        var bg = document.querySelectorAll('dialog::backdrop')[0];
        // when the user clicks on the button, open the modal
        btn.onclick = function() {
            modal.style.display = "block";
        }
        // when the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }
        // when the user clicks anywhere outside of the modal, close it
        document.addEventListener('click', function(event) {
            if (event.target == bg) {
                modal.style.display = "none";
            }
        });
    });
